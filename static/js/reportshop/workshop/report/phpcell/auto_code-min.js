function TCRSAutoCode(a){this.crsDataSet=a;TCRSDataRecord.call(this,this.crsDataSet,"crscell.crs_autocode","*","","");this.arr_cur_autocode=null}TCRSAutoCode.prototype=new TCRSDataRecord();TCRSAutoCode.prototype.get_next_autocode=function(b,d){var a="";this.loadData("#tablecrs_autocode");var c=this.search("id",b);if(c!=null){if(c.newpoint=="\u65b0\u5efa\u62a5\u8868"&&d||c.newpoint=="\u4fdd\u5b58\u62a5\u8868"&&!d){a=this.crsDataSet.get_next_autocode(b);if(this.arr_cur_autocode==null){this.arr_cur_autocode=[]}this.arr_cur_autocode.push(b);this.arr_cur_autocode.push(a)}}return a};TCRSAutoCode.prototype.roll_back=function(){if(this.arr_cur_autocode!=null){for(var b=0,a=this.arr_cur_autocode.length/2;b<a;b++){var c=this.search("id",this.arr_cur_autocode[b*2]);if(c!=null){if(c.reusetype!="\u4e0d\u53ef\u91cd\u7528"){this.crsDataSet.roll_back(c.id,this.arr_cur_autocode[b*2+1])}}}}};
