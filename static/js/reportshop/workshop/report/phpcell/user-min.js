function TCRSUser(b){this.crsDataSet=b;TCRSDataRecord.call(this,this.crsDataSet,"user","USER_ID,USER_NAME,DEPT_ID,DEPT_ID_OTHER,USER_PRIV,USER_PRIV_OTHER","","")}TCRSUser.prototype=new TCRSDataRecord();TCRSUser.prototype.getUserRoleInfo=function(){this.loadData("#tableuser");info=this.first();res=[];if(!this.EOF()){res.push(info.USER_PRIV);res.push(HandleMemoStr(info.USER_PRIV_OTHER,false));res.push(info.DEPT_ID);res.push(HandleMemoStr(info.DEPT_ID_OTHER,false));res.push(this.userId)}return res};TCRSUser.prototype.get_dept_and_priv=function(f){this.loadData("#tableuser");var e={dept:"",priv:"",other_dept:"",other_priv:""};var d=this.search("USER_ID",f);if(d!=null){e.dept=d.DEPT_ID;e.priv=d.USER_PRIV;e.other_dept=HandleMemoStr(d.DEPT_ID_OTHER,false);e.other_priv=HandleMemoStr(d.USER_PRIV_OTHER,false)}return e};TCRSUser.prototype.get_name_by_id=function(c){this.loadData("#tableuser");var d=this.search("USER_ID",c);if(d==null){var e=this.crsDataSet.get_user_by_id(c);if(e.length>0){var f=this;$.each(e,function(a,b){f.rows.push(b)});d=e[0]}}if(d!=null){return d.USER_NAME}else{return c}};TCRSUser.prototype.get_id_by_name=function(d){this.loadData("#tableuser");var c=this.search("USER_NAME",d);if(c==null){var e=this.crsDataSet.get_user_by_name(d);if(e.length>0){var f=this;$.each(e,function(a,b){f.rows.push(b)});c=e[0]}}if(c!=null){return c.USER_ID}else{return d}};TCRSUser.prototype.get_name_list_by_id=function(h){if(h!=""){var e=h.split(",");h="";for(var g=0,f=e.length;g<f;g++){if(e[g]!=""){h+=this.get_name_by_id(e[g])+","}}}return h};TCRSUser.prototype.get_id_list_by_name=function(h){if(h!=""){var e=h.split(",");h="";for(var g=0,f=e.length;g<f;g++){if(e[g]!=""){h+=this.get_id_by_name(e[g])+","}}}return h};TCRSUser.prototype.get_user_list_by_priv=function(g){this.loadData("#tableuser");var f={};if(!this.isEmpty()){var h=this.first();while(!this.EOF()){var e=","+HandleMemoStr(h.USER_PRIV_OTHER,false)+h.USER_PRIV+",";if(e.indexOf(","+g+",")!=-1){f[h.USER_ID]=h.USER_NAME}h=this.next()}}return f};TCRSUser.prototype.get_user_list_by_dept=function(k,i){var h={};if(!this.isEmpty()){var j=this.first();while(!this.EOF()){var l=","+HandleMemoStr(j.DEPT_ID_OTHER,false)+j.DEPT_ID+",";var g=","+HandleMemoStr(j.USER_PRIV_OTHER,false)+j.USER_PRIV+",";if(l.indexOf(","+k+",")!=-1&&(i==""||in_assign_role(i,g)||crsReport.crsDeptCache.is_dept_manager(j.USER_ID,k,i))){h[j.USER_ID]=j.USER_NAME}j=this.next()}}return h};
